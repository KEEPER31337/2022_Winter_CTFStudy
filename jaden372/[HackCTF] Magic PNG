https://ctf.j0n9hyun.xyz/challenges#Magic%20PNG

처음엔 굉장히 당혹스러웠다.
파일이 열 수 없어 PNG 확장자가 아니라 생각했으나
확인하니 헤더 부분이 잘못되어 수정했다

PNG의 경우 확장자가 아래와 같아야 한다
89 50 4E 47 0D 0A 1A 0A

그런데 확인된 사진은 여전히 깨져있었다....... 몰까
무엇 때문에 깨졌는지 알아보기 위해 검색해보자
https://mineeeee.tistory.com/12
여기서 PNG의 파일구조를 알려주었다.

헤더 시그니처엔 문제가 없는 걸 알아냈으니
그 사이에 문제가 있으리라 파악하고
IHDR, IDAT, PLTE, IEND 청크를 검색해보았다.

푸터 시그니처의 IEND은 문제가 없었고
IHDR도 딱히 문제가 보이진 않았다.


중간에 IDAT가 있어야할 부분에 idat가 있어
49 44 41 54로 나타나야할 hex값(IDAT)이
69 64 61 74로 나타나 있다는 걸 알았다(idat)
값을 변경하자 깨져있던 사진이 복구되었고 Key값이 나왔다.

순차적으로 읽어내리는지 파일이 손상된 지점이랑
Hex값을 살펴보았을 때 손상된 지점이 유사했으므로
다음에 유사한 문제를 풀 땐 어느 지점이 손상되었는지
육안으로 파악하여 그 부분의 Hex를 조사하면 더욱 좋을 것 같다.
